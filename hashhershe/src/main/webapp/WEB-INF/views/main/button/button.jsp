<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Insert title here</title>
<script src="jquery-3.2.1.min.js"></script>
<script>
$(document).ready(function({
});//document ready end

function signup_mainscroll(){
	location.href = "/button"
};//mapping end
</script>
<link rel="stylesheet" href="BUTTON/style.css">
</head>
<body>
<div class="loader prevLoader" style="display: none;">loading...</div>
<div class="center">
    <span class="button prevBtn" style="display: none;">prev page</span>
</div>
<article id="container">
    <div class="item"><img src="BUTTONIMG/zzzzzzz (1).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (2).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (3).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (4).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (5).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (6).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (7).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (8).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (9).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (10).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (11).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (12).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (13).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (14).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (15).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (16).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (17).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (18).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (19).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (20).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (21).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (22).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (23).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (24).jpg" alt="" class="img"></div>	
<!-- 		<div class="item"><img src="BUTTONIMG/zzzzzzz (25).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (26).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (27).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (28).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (29).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (30).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (31).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (32).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (33).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (34).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (35).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (36).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (37).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (38).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (39).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (40).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (41).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (42).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (43).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (44).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (45).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (46).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (47).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (48).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (49).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (50).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (51).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (52).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (53).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (54).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (55).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (56).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (57).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (58).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (59).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (60).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (61).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (62).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (63).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (64).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (65).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (66).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (67).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (68).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (69).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (70).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (71).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (72).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (73).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (74).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (75).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (76).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (77).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (78).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (79).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (80).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (81).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (82).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (83).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (84).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (85).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (86).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (87).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (88).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (89).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (90).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (91).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (92).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (93).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (94).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (95).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (96).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (97).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (98).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (99).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (100).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (101).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (102).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (103).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (104).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (105).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (106).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (107).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (108).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (109).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (110).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (111).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (112).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (113).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (114).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (115).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (116).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (117).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (118).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (119).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (120).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (121).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (122).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (123).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (124).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (125).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (126).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (127).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (128).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (129).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (130).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (131).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (132).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (133).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (134).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (135).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (136).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (137).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (138).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (139).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (140).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (141).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (142).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (143).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (144).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (145).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (146).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (147).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (148).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (149).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (150).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (151).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (152).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (153).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (154).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (155).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (156).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (157).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (158).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (159).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (160).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (161).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (162).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (163).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (164).jpg" alt="" class="img"></div>	
	<div class="item"><img src="BUTTONIMG/zzzzzzz (165).jpg" alt="" class="img"></div>	 -->
</article>
<div class="center center2">
    <span class="button nextBtn" style="">more...</span>
</div>
<div class="loader nextLoader">loading...</div>
<div class="paging">
    <a class="prev done"></a> 
    <a class="next" href="./button2.html"></a> 
</div>
<script src="BUTTON/infiniteScroll.min.js"></script>
<script src="BUTTON/infiniteScroll.js"></script>
<script src="BUTTON/button.js"></script>

<div class="paginaiton"></div>
</body>
</html>
<script>


return new Promise(function(resolve) {
    var item = {
      id: id,
      avarta: ''
    }
    if(item.image === '') {
      resolve(item);
    }
    var image = new Image();
    avarta.src = 'BUTTONIMG/zzzzzzz (' + item.image + ').jpg';
    avarta.addEventListener('load', function() {
      item.image = image;
      resolve(item);
    }); 
    image.addEventListener('error', function() {
      item.image = '';
      resolve(item);
    });
  });
}



function YesScroll () {
const pagination = document.querySelector('.paginaiton'); // 페이지네이션 정보획득
const fullContent = document.querySelector('.container'); // 전체를 둘러싼 컨텐츠 정보획득
const screenHeight = screen.height; // 화면 크기
let oneTime = false; // 일회용 글로벌 변수
document.addEventListener('scroll',OnScroll,{passive:true}) // 스크롤 이벤트함수정의
function OnScroll () { //스크롤 이벤트 함수
const fullHeight = fullContent.clientHeight; // infinite 클래스의 높이   
const scrollPosition = pageYOffset; // 스크롤 위치
if (fullHeight-screenHeight/2 <= scrollPosition && !oneTime) { // 만약 전체높이-화면높이/2가 스크롤포지션보다 작아진다면, 그리고 oneTime 변수가 거짓이라면
 oneTime = true; // oneTime 변수를 true로 변경해주고,
 madeBox(); // 컨텐츠를 추가하는 함수를 불러온다.
}
}
}


YesScroll()

const nextLink = pagination.querySelector('.next');
const nextURL = nextLink.getAttribute('href');

madeBox(){

const xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() { 
  if (xhr.readyState === xhr.DONE) { 
    if (xhr.status === 200 || xhr.status === 201) {
      const data = xhr.response; // 다음페이지의 정보
      const addList = data.querySelector('.item'); // 다음페이지에서 item아이템을 획득
      fullContent.appendChild(addList); // infinite에 list를 더해주기
      oneTime = false; // oneTime을 다시 false로 돌려서 madeBox를 불러올 수 있게 해주기
    } else {
      console.error(xhr.response);
    }
  }
};
xhr.open('GET', nextURL); // 다음페이지의 정보를 get
xhr.send();
xhr.responseType = "document";



}











if (fullHeight-screenHeight/2 <= scrollPosition && !oneTime) {
oneTime = true; 
madeBox(); 
} // 기존 방식



if (fullHeight-screenHeight/2 <= scrollPosition && !oneTime) {
oneTime = true; 
const button = document.createElement('button');
button.className = "nextButton";
button.textContent = "다음페이지";
fullContent.appendChild(button);
} // 버튼 방식

const nextButton = document.querySelector('.nextButton')l
nextButton.addEventListener('click',nextGO); // 만들어낸 버튼에 장착한 클릭 이벤트 리스너
function nextGO () { // 만약 버튼을 클릭했다면
madeBox();//madeBox를 발동한다
this.parentNode.removeChild(nextButton); // 버튼을 제거한다.
}

history.pushState(null, null, xhr.responseURL);

if (fullHeight-screenHeight/2 <= scrollPosition && !oneTime) {
     oneTime = true; 
     madeBox(); 
   } 
   else if ( scrollPosition == 0 ) {
    oneTime = true;
    madeBox();
   }

   else if ( scrollPosition == 0 ) {
	    oneTime = true;
	    upup = true;
	    madeBox();
	   }

addEventListener('scroll',OnScroll,{passive:true});

/* 
if (끝페이지에 도달- 데이터 끝 조건) {
removeEventListener('scroll',OnScroll,{passive:true});
}
*/

</script>